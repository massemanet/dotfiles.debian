#!/bin/bash

## if console font is unreadably small
# cd /usr/share/consolefonts/
# setfont Lat15-Terminus32x16.psf.gz

## to temporarily attach to wifi
# ip a
# wpa_passphrase <ssid> <pwd> > /etc/wpa_supplicant/wpa_supplicant.conf
# /sbin/wpa_supplicant -i<interface> -c/etc/wpa_supplicant/wpa_supplicant.conf -d &

# add a user
# sudo adduser masse sudo

# timezone
TZ="Europe/Gibraltar"
[ "$(timedatectl show | grep Timezone | cut -f2 -d"=")" = "$TZ" ] || \
    sudo timedatectl set-timezone "$TZ"

# install some sane stuff
sudo apt-get update &&
    sudo apt-get upgrade -y &&
    sudo apt-get install --autoremove -y \
         deborphan \
         jq \
         lsof \
         mosh \
         pandoc pass psmisc \
         shellcheck socat strace sysstat \
         tcpdump tmux traceroute \
         whois

# get my stuff
[ ! -e ~/.git ] &&
    (cd /tmp &&
         rm -rf dotfiles &&
         git clone https://github.com/massemanet/dotfiles.debian dotfiles &&
         cd dotfiles &&
         git remote set-url origin git@github.com:massemanet/dotfiles.debian &&
         mv .git ~ &&
         cd ~ &&
         git reset --hard)

# get the pet files
[ -d ~/pet ] || ~/bin/pet keys

# install utilities
command -v emacs || ~/bin/install.sh emacs
command -v erl   || ~/bin/install.sh erlang
# command -v keybase       || ~/bin/install.sh keybase
# command -v docker        || ~/bin/install.sh docker
